<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Client - TamilConnect</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <style>.course {
        border: 1px solid #ddd;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 5px;
        background-color: #f9f9f9;
    }
    
    .premium-course {
        background-color: #f4f4f4;
        border: 2px dashed #ff9800;
        opacity: 0.7;
    }
    
    .premium-message {
        color: #ff9800;
        font-weight: bold;
        text-align: center;
    }
    </style>
    <header>
        <h1>Bienvenue dans votre espace client</h1>
        <nav>
            <a href="connexion.html">Se connecter</a> |
            <a href="inscription.html">S'inscrire</a> |
            <a href="TamilConnect.html">Se d√©connecter</a>
        </nav>
    </header>

    <section>
        <h2>Liste des cours disponibles</h2>
        <div id="cours-list">
            <!-- Les cours seront affich√©s ici avec JS -->
        </div>
    </section>

    <!-- Conteneur de vid√©os -->
    <section class="video-container">
        <div class="video-item">
            <h3>Histoire des Tamouls</h3>
            <video width="360" height="360" controls>
                <source src="http://localhost/Tamilconnect/video/tamoul%20histoire.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la balise vid√©o.
            </video>
        </div>

        <div class="video-item">
            <h3>Musique Tamoule</h3>
            <p class="video-info">Cette vid√©o est payante. Cliquez ci-dessous pour y acc√©der.</p>
            
            <!-- Conteneur vid√©o avec un style d√©sactiv√© -->
            <div id="video-container" class="video-gray">
                <video id="video" width="360" height="360" controls disabled>
                    <source src="http://localhost/Tamilconnect/video/musique_tamoule.mp4" type="video/mp4">
                    Votre navigateur ne supporte pas la balise vid√©o.
                </video>
            </div>
            
            <!-- Bouton pour rediriger vers la page de paiement -->
            <button onclick="redirectToPayment()">Acc√©der √† la vid√©o</button>
        </div>
        
        <script>
        function redirectToPayment() {
            // Rediriger l'utilisateur vers la page de paiement
            window.location.href = 'paiement.html';
        }
        
        // Cette fonction sera appel√©e apr√®s le paiement pour activer la vid√©o
        function unlockVideo() {
            var video = document.getElementById('video');
            var videoContainer = document.getElementById('video-container');
        
            // Activer la vid√©o et supprimer l'effet gris
            video.removeAttribute('disabled');
            videoContainer.style.filter = 'none';
        }
        </script>
        
        <style>
        /* Appliquer un filtre gris √† la vid√©o avant paiement */
        .video-gray video {
            filter: grayscale(100%);
            opacity: 0.6;
        }
        
        /* Ajouter un peu de style au message */
        .video-info {
            font-size: 14px;
            color: #ff0000;
            margin-bottom: 10px;
        }
        
        /* Style du bouton */
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            border-radius: 5px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        </style>
        
    </section>

    <section>
        <h2>Devenir Premium</h2>
        <p>Abonnez-vous pour avoir acc√®s √† plus de cours et de fonctionnalit√©s.</p>
        <!-- Ajouter un lien autour du bouton pour rediriger vers la page d'abonnement -->
        <a href="abonnement.html">
            <button id="become-premium-btn">Devenir Premium</button>
        </a>
    </section>
    
    <footer>
        <p>&copy; 2025 TamilConnect - Tous droits r√©serv√©s</p>
    </footer>

    <script>
        // R√©cup√©ration des cours via l'API
        async function getCourses() {
            try {
                const response = await fetch('');
                const courses = await response.json();

                const coursesContainer = document.getElementById('cours-list');

                if (courses.length > 0) {
                    courses.forEach(course => {
                        const courseElement = document.createElement('div');
                        courseElement.classList.add('course');

                        const titleElement = document.createElement('h3');
                        titleElement.textContent = course.title;
                        courseElement.appendChild(titleElement);

                        const descriptionElement = document.createElement('p');
                        descriptionElement.textContent = course.description || "Aucune description disponible.";
                        courseElement.appendChild(descriptionElement);

                        const downloadButton = document.createElement('a');
                        downloadButton.href = `}`;
                        downloadButton.textContent = 'T√©l√©charger le cours';
                        downloadButton.setAttribute('download', course.file);
                        courseElement.appendChild(downloadButton);

                        coursesContainer.appendChild(courseElement);
                    });
                } else {
                    coursesContainer.innerHTML = "<p>Aucun cours disponible pour le moment.</p>";
                }
            } catch (error) {
                console.error("Erreur lors de la r√©cup√©ration des cours:", error);
            }
        }

        // Charger les cours lorsque la page est charg√©e
        window.onload = getCourses;
    </script>
</body>

</html>

<script>
    // R√©cup√©ration des cours via l'API
    async function getCourses() {
    try {
        const response = await fetch('http://localhost/tamilconnect/get_courses.php');

        if (!response.ok) {
            throw new Error(`Erreur HTTP: ${response.status}`);
        }

        const courses = await response.json();
        console.log("Donn√©es re√ßues :", courses); // Debug console

        const coursesContainer = document.getElementById('cours-list');
        coursesContainer.innerHTML = ""; // Nettoyer avant d'afficher

        if (courses.length > 0) {
            courses.forEach(course => {
                const courseElement = document.createElement('div');
                courseElement.classList.add('course');

                // Ajouter une classe sp√©ciale pour les cours premium
                if (course.is_premium == 1) {
                    courseElement.classList.add('premium-course');
                }

                // Cr√©er et ajouter le titre
                const titleElement = document.createElement('h3');
                titleElement.textContent = course.title;
                courseElement.appendChild(titleElement);

                // Cr√©er et ajouter la description
                const descriptionElement = document.createElement('p');
                descriptionElement.textContent = course.description || "Aucune description disponible.";
                courseElement.appendChild(descriptionElement);

                // Ajouter bouton de t√©l√©chargement SI le cours est gratuit
                if (course.is_premium == 0) {
                    const downloadButton = document.createElement('a');
                    downloadButton.href = `http://localhost/TamilConnect/uploads/${course.file}`;
                    downloadButton.textContent = 'T√©l√©charger le cours';
                    downloadButton.setAttribute('download', course.file);
                    courseElement.appendChild(downloadButton);
                } else {
                    // Message indiquant que le cours est premium
                    const premiumMessage = document.createElement('p');
                    premiumMessage.textContent = "üîí Ce cours est r√©serv√© aux membres premium.";
                    premiumMessage.classList.add('premium-message');
                    courseElement.appendChild(premiumMessage);
                }

                // Ajouter l'√©l√©ment du cours au conteneur
                coursesContainer.appendChild(courseElement);
            });
        } else {
            coursesContainer.innerHTML = "<p>Aucun cours disponible pour le moment.</p>";
        }
    } catch (error) {
        console.error("Erreur lors de la r√©cup√©ration des cours:", error);
    }
}

// Charger les cours au chargement de la page
window.onload = getCourses;

</script>



