<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Premium - TamilConnect</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <h1>Bienvenue dans votre espace Premium</h1>
        <nav>
            <a href="TamilConnect.html">Se déconnecter</a>
        </nav>
    </header>

    <section>
        <h2>Liste des cours Premium</h2>
        <div id="premium-courses-list">
            <!-- Les cours premium seront affichés ici avec JS -->
        </div>
    </section>

    <footer>
        <p>&copy; 2025 TamilConnect - Tous droits réservés</p>
    </footer>

    <script>
        async function getAllCourses() {
    try {
        const response = await fetch("http://localhost/tamilconnect/get_courses.php");

        if (!response.ok) {
            throw new Error(`Erreur HTTP: ${response.status}`);
        }

        const courses = await response.json();
        console.log("Données reçues :", courses); // Debug console

        const coursesContainer = document.getElementById("premium-courses-list");
        coursesContainer.innerHTML = ""; // Nettoyer avant d'afficher

        if (courses.length > 0) {
            courses.forEach(course => {
                const courseElement = document.createElement("div");
                courseElement.classList.add("course");

                const titleElement = document.createElement("h3");
                titleElement.textContent = course.title;
                courseElement.appendChild(titleElement);

                const descriptionElement = document.createElement("p");
                descriptionElement.textContent = course.description || "Aucune description disponible.";
                courseElement.appendChild(descriptionElement);

                // Afficher fichier PDF
                if (course.file) {
                    const downloadButton = document.createElement("a");
                    downloadButton.href = `http://localhost/TamilConnect/uploads/${course.file}`;
                    downloadButton.textContent = "Télécharger le PDF";
                    downloadButton.setAttribute("download", course.file);
                    courseElement.appendChild(downloadButton);
                }

                // Afficher fichier vidéo
                if (course.video_file) {
                    const videoElement = document.createElement("video");
                    videoElement.src = `http://localhost/TamilConnect/uploads/${course.video_file}`;
                    videoElement.controls = true;
                    videoElement.style.width = "300px";
                    courseElement.appendChild(videoElement);
                }

                // Afficher si le cours est premium ou non
                const premiumTag = document.createElement("p");
                premiumTag.textContent = course.is_premium == 1 ? " Cours Premium" : "✔️ Cours Gratuit";
                courseElement.appendChild(premiumTag);

                coursesContainer.appendChild(courseElement);
            });
        } else {
            coursesContainer.innerHTML = "<p>Aucun cours disponible.</p>";
        }
    } catch (error) {
        console.error("Erreur lors de la récupération des cours:", error);
    }
}

// Charger tous les cours au chargement de la page
window.onload = getAllCourses;

    </script>
</body>

</html>
